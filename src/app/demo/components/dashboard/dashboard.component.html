<div class="grid">
    <div class="col-6">
        <div class="card">
            <div class="farm-details">
                <div class="farm-details-img">
                    <img src="https://placehold.co/110x110" alt="farm image">
                </div>
                <p-divider></p-divider>
                <div class="farm-details-content">
                    <div class="grid">
                        <div class="md:col-6 mb-3">
                            <h5>Full Name</h5>
                            <p>{{selectedItem?.type}}</p>
                        </div>
                        <div class="md:col-6 mb-3">
                            <h5>Farm Name</h5>
                            <p>{{selectedItem?.name}}</p>
                        </div>
                        <div class="md:col-6 mb-3">
                            <h5>Phone Number</h5>
                            <p>{{selectedItem?.contactPhone}}</p>
                        </div>
                        <div class="md:col-6 mb-3">
                            <h5>Email Address</h5>
                            <p>{{selectedItem?.contactEmail}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6">
        <app-add-farm (formSubmitted)="formSubmitted($event)" [farm]="farms"
            (itemSend)="getItem($event)"></app-add-farm>
    </div>
    <div class="col-12">
        <div class="grid">
            <div class="col-12">
                <div class="card px-6 py-6">
                    <p-toast></p-toast>
                    <p-table #dt [value]="farms" [columns]="farmsCols" responsiveLayout="scroll" [rows]="10"
                        [globalFilterFields]="['name','type','id']" [paginator]="true" [rowsPerPageOptions]="[10,20,30]"
                        [showCurrentPageReport]="true" [(selection)]="selectedFarm"
                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                        [rowHover]="true" dataKey="id">
                        <ng-template pTemplate="caption">
                            <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">
                                <!-- <h5 class="m-0">Manage Products</h5> -->
                                <span class="block mt-2 md:mt-0 p-input-icon-left">
                                    <i class="pi pi-search"></i>
                                    <input pInputText type="text" (input)="onGlobalFilter($event)"
                                        placeholder="Search..." class="w-full sm:w-auto" />
                                </span>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header">
                            <tr>
                                <th style="width: 3rem">
                                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                </th>
                                <ng-container *ngFor="let col of farmsCols">
                                    <th pSortableColumn="{{col.field}}">{{col.header}}
                                        <p-sortIcon field="{{col.field}}"></p-sortIcon>
                                    </th>
                                </ng-container>
                                <th>Actions</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-item let-i="index">
                            <tr>
                                <td>
                                    <p-tableCheckbox [value]="item"></p-tableCheckbox>
                                </td>
                                <td style="width:14%; min-width:10rem;">
                                    <span class="p-column-title">createdAt</span>
                                    {{item.createdAt}}
                                </td>
                                <td style="width:14%; min-width:10rem;">
                                    <span class="p-column-title">updatedAt</span>
                                    {{item.updatedAt}}
                                </td>
                                <td style="width:14%; min-width:10rem;">
                                    <span class="p-column-title">id</span>
                                    {{item.id}}
                                </td>
                                <td style="width:14%; min-width:8rem;">
                                    <span class="p-column-title">name</span>
                                    {{item.name}}
                                </td>
                                <td style="width:14%; min-width:10rem;">
                                    <span class="p-column-title">type</span>
                                    {{item.type}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">code </span>
                                    {{item.code}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">logo</span>
                                    <!-- <img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name" width="100" class="shadow-4" /> -->
                                    {{item.logo}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">address</span>
                                    {{item.address}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">nPonds</span>
                                    {{item.nPonds}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">nFishPerPond</span>
                                    {{item.nFishPerPond}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">timezone</span>
                                    {{item.timezone}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">contactPhone </span>
                                    {{item.contactPhone}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">contactEmail </span>
                                    {{item.contactEmail}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">order</span>
                                    {{item.order}}
                                </td>
                                <td style="width:14%; min-width: 10rem;">
                                    <span class="p-column-title">is_archived</span>
                                    {{item.is_archived}}
                                </td>
                                <td>
                                    <div class="flex">
                                        <button pButton pRipple icon="pi pi-pencil"
                                            class="p-button-rounded p-button-success mr-2" (click)="editItem(item)">
                                        </button>
                                        <button pButton pRipple icon="pi pi-trash"
                                            class="p-button-rounded p-button-danger" (click)="deleteItem(item.id)">

                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>

                <!-- <p-dialog [(visible)]="farmDialog" [style]="{width: '450px'}" header="farm Details" [modal]="true" class="p-fluid">
					<ng-template pTemplate="content">
						<img [src]="'assets/demo/images/product/' + product.image" [alt]="product.image" width="150" class="mt-0 mx-auto mb-5 block shadow-2" *ngIf="product.image">
						<div class="field">
							<label for="name">Name</label>
							<input type="text" pInputText id="name" [(ngModel)]="product.name" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !product.name}"/>
							<small class="ng-dirty ng-invalid" *ngIf="submitted && !product.name">Name is required.</small>
						</div>
						<div class="field">
							<label for="description">Description</label>
							<textarea id="description" pInputTextarea [(ngModel)]="product.description" required rows="3" cols="20"></textarea>
						</div>
						<div class="field">
							<label for="status">Inventory Status</label>
							<p-dropdown [(ngModel)]="product.inventoryStatus" inputId="inventoryStatus" optionValue="label" [options]="statuses" placeholder="Select">
								<ng-template pTemplate="selectedItem">
									<span *ngIf="product && product.inventoryStatus" [class]="'product-badge status-' + product.inventoryStatus.toString().toLowerCase()">{{product.inventoryStatus}}</span>
								</ng-template>
								<ng-template let-option pTemplate="item">
									<span [class]="'product-badge status-' + option.value">{{option.label}}</span>
								</ng-template>
							</p-dropdown>
						</div>

						<div class="field">
							<label class="mb-3">Category</label>
							<div class="formgrid grid">
								<div class="field-radiobutton col-6">
									<p-radioButton id="category1" name="category" value="Accessories" [(ngModel)]="product.category"></p-radioButton>
									<label for="category1">Accessories</label>
								</div>
								<div class="field-radiobutton col-6">
									<p-radioButton id="category2" name="category" value="Clothing" [(ngModel)]="product.category"></p-radioButton>
									<label for="category2">Clothing</label>
								</div>
								<div class="field-radiobutton col-6">
									<p-radioButton id="category3" name="category" value="Electronics" [(ngModel)]="product.category"></p-radioButton>
									<label for="category3">Electronics</label>
								</div>
								<div class="field-radiobutton col-6">
									<p-radioButton id="category4" name="category" value="Fitness" [(ngModel)]="product.category"></p-radioButton>
									<label for="category4">Fitness</label>
								</div>
							</div>
						</div>

						<div class="formgrid grid">
							<div class="field col">
								<label for="price">Price</label>
								<p-inputNumber id="price" [(ngModel)]="product.price" mode="currency" currency="USD" locale="en-US"></p-inputNumber>
							</div>
							<div class="field col">
								<label for="quantity">Quantity</label>
								<p-inputNumber id="quantity" [(ngModel)]="product.quantity"></p-inputNumber>
							</div>
						</div>
					</ng-template>

					<ng-template pTemplate="footer">
						<button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
						<button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveProduct()"></button>
					</ng-template>
				</p-dialog>

				<p-dialog [(visible)]="deleteFarmDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
					<div class="flex align-items-center justify-content-center">
						<i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
						<span *ngIf="product">Are you sure you want to delete <b>{{product.name}}</b>?</span>
					</div>
					<ng-template pTemplate="footer">
						<button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductDialog = false"></button>
						<button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDelete()"></button>
					</ng-template>
				</p-dialog>

				<p-dialog [(visible)]="deleteFarmsDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
					<div class="flex align-items-center justify-content-center">
						<i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
						<span>Are you sure you want to delete selected products?</span>
					</div>
					<ng-template pTemplate="footer">
						<button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductsDialog = false"></button>
						<button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDeleteSelected()"></button>
					</ng-template>
				</p-dialog> -->
            </div>
        </div>

    </div>
</div>

<app-edit-farm *ngIf="showEdit" (formSubmitted)="formSubmitted($event)" [currentFarm]="currentFarm"
    [showEdit]="showEdit"></app-edit-farm>
